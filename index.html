<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MemeBox</title>

<style>
body {
  margin:0;
  background:#111;
  color:white;
  font-family:sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  padding:15px;
}
.box {
  background:#1a1a1a;
  width:100%;
  max-width:420px;
  padding:20px;
  border-radius:12px;
  text-align:center;
  box-shadow:0 0 15px black;
}
img {
  width:100%;
  border-radius:10px;
  margin:15px 0;
  max-height:420px;
  object-fit:contain;
}
button {
  padding:10px 18px;
  border:none;
  border-radius:6px;
  margin:5px;
  cursor:pointer;
  font-size:15px;
}
#next { background:#4caf50; color:white; }
#adminBtn { background:#f44336; color:white; }

#adminPanel {
  display:none;
  background:#222;
  padding:15px;
  border-radius:10px;
  margin-top:15px;
}
input {
  width:100%;
  padding:8px;
  margin:5px 0;
  border-radius:6px;
  border:none;
}
#memeList {
  max-height:140px;
  overflow:auto;
  background:#111;
  padding:8px;
  border-radius:6px;
  text-align:right;
}
.memeItem {
  display:flex;
  justify-content:space-between;
  background:#333;
  padding:6px;
  border-radius:5px;
  margin:4px 0;
  font-size:13px;
}
.memeItem button {
  background:#ff1744;
  padding:4px 8px;
  font-size:12px;
  border-radius:4px;
  border:none;
  cursor:pointer;
}
.smallNote { font-size:12px;color:#bbb;margin-top:8px }
@media(max-width:420px){ .box{padding:14px} img{max-height:320px} }
</style>
</head>

<body>
<div class="box">
  <h2>ğŸ˜‚ Ù…ÛŒÙ…â€ŒØ¨Ø§Ú©Ø³ ÙØ§Ø±Ø³ÛŒ</h2>
  <img id="memePic" src="" alt="Ù…ÛŒÙ…">
  <br>
  <button id="next" onclick="nextMeme()">Ù…ÛŒÙ… Ø¨Ø¹Ø¯ÛŒ</button>
  <button id="adminBtn" onclick="openAdmin()">ÙˆØ±ÙˆØ¯ Ø§Ø¯Ù…ÛŒÙ†</button>

  <!-- Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† -->
  <div id="adminPanel" aria-hidden="true">
    <h3 style="margin-top:10px">Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</h3>
    <input id="newMemeUrl" placeholder="Ù„ÛŒÙ†Ú© Ù…ÛŒÙ… Ø¬Ø¯ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†">
    <button onclick="addMeme()">â• Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù†</button>

    <h4 style="margin-top:12px">Ù„ÛŒØ³Øª Ù…ÛŒÙ…â€ŒÙ‡Ø§:</h4>
    <div id="memeList"></div>
  </div>
</div>

<script>
// Ø±Ù…Ø² Ù…Ø¯ÛŒØ±ÛŒØª (Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø² ØªØºÛŒÛŒØ±Ø´ Ø¨Ø¯Ù‡)
const ADMIN_PASS = "admin123";

// Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ÛŒÙ…â€ŒÙ‡Ø§ Ø§Ø² LocalStorage ÛŒØ§ Ù…Ù‚Ø¯Ø§Ø± Ù¾ÛŒØ´ÙØ±Ø¶
let memes = JSON.parse(localStorage.getItem("memes")) || [
  "https://s6.uupload.ir/files/images_(6)_fw5i.jpeg",
  "https://s6.uupload.ir/files/1665644779_ihw3.jpg",
  "https://s6.uupload.ir/files/images_(5)_230t.jpeg",
  "https://s6.uupload.ir/files/1717147108_1231961_hv3w.jpg",
  "https://s6.uupload.ir/files/1717146899327_k8g8.jpg",
  "https://s6.uupload.ir/files/171714672229_5yqh.jpg",
  "https://s6.uupload.ir/files/1714736817_xt53.jpg",
  "https://s6.uupload.ir/files/1650471936_hpak.jpg"
  "https://s6.uupload.ir/files/images_(4)_kh4h.jpeg"
];

function saveMemes(){
  localStorage.setItem("memes", JSON.stringify(memes));
  loadList();
}

function nextMeme(){
  if(!memes || memes.length === 0){
    document.getElementById("memePic").src = "";
    return;
  }
  const m = memes[Math.floor(Math.random()*memes.length)];
  document.getElementById("memePic").src = m;
}

function openAdmin(){
  const pass = prompt("Ø±Ù…Ø² Ø§Ø¯Ù…ÛŒÙ† Ø±Ùˆ ÙˆØ§Ø±Ø¯ Ú©Ù†:");
  if(pass === ADMIN_PASS){
    const panel = document.getElementById("adminPanel");
    panel.style.display = "block";
    panel.setAttribute("aria-hidden","false");
    loadList();
  } else {
    alert("Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡Ù‡.");
  }
}

function addMeme(){
  const url = document.getElementById("newMemeUrl").value.trim();
  if(!url) { alert("Ø¢Ø¯Ø±Ø³ ÙˆØ§Ø±Ø¯ Ù†Ø´Ø¯Ù‡"); return; }
  // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² ØªÚ©Ø±Ø§Ø±ÛŒ Ø´Ø¯Ù† Ø¯Ù‚ÛŒÙ‚
  if(memes.includes(url)) { alert("Ø§ÛŒÙ† Ù„ÛŒÙ†Ú© Ù‚Ø¨Ù„Ø§Ù‹ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡"); document.getElementById("newMemeUrl").value = ""; return; }
  memes.push(url);
  document.getElementById("newMemeUrl").value = "";
  saveMemes();
  alert("Ù…ÛŒÙ… Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.");
}

function deleteMeme(index){
  if(!confirm("Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù†ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ Ø§ÛŒÙ† Ù„ÛŒÙ†Ú© Ø­Ø°Ù Ø¨Ø´Ù‡ØŸ")) return;
  memes.splice(index,1);
  saveMemes();
}

function loadList(){
  const list = document.getElementById("memeList");
  list.innerHTML = "";
  if(!memes || memes.length === 0){
    list.innerHTML = "<div style='color:#999'>Ù„ÛŒØ³Øª Ø®Ø§Ù„ÛŒ Ø§Ø³Øª.</div>";
    return;
  }
  memes.forEach((m, i) => {
    const short = m.length > 48 ? m.slice(0,45) + "..." : m;
    const div = document.createElement("div");
    div.className = "memeItem";
    div.innerHTML = `<div style="text-align:left;direction:ltr;overflow:hidden;white-space:nowrap">${short}</div>
                     <button onclick="deleteMeme(${i})">Ø­Ø°Ù</button>`;
    list.appendChild(div);
  });
}

// Ø´Ø±ÙˆØ¹ Ø§ÙˆÙ„ÛŒÙ‡
nextMeme();
</script>
</body>
</html>